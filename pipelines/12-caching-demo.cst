# 12 -- Caching Demo
# Demonstrates: cache option with different TTLs, cache backend selection
#
# When memcached is configured, cached results are stored in the
# distributed cache. View cache hit rates via /metrics endpoint.

in text: String

# Short-lived cache (5 minutes) -- good for frequently changing data
quickCache = Uppercase(text) with cache: 5min

# Medium cache (1 hour) -- good for moderately stable data
mediumCache = Lowercase(text) with cache: 1h

# Long-lived cache (1 day) -- good for stable reference data
longCache = WordCount(text) with cache: 1d

# Cache with retry -- cached result survives retries
resilientCached = TextLength(text) with
    cache: 30min,
    retry: 2

out quickCache
out mediumCache
out longCache
out resilientCached
